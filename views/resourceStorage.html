<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>resourceStorage</title>
        <!-- <link rel="stylesheet" href="resourceStorage.css"> -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    </head>
<body>
    <style>
        body {
          display: flex;
          min-height: 100vh;
          overflow-x: hidden;
        }
        .sidebar {
          min-width: 250px;
          max-width: 250px;
          height: 100vh;
        }
        .content {
          flex-grow: 1;
          padding: 20px;
        }
        .html{
            background-color: red;
        }
      </style>

      <!-- Sidebar -->
  <nav class="sidebar bg-dark text-white d-flex flex-column p-3">
    <h3 class="mb-4">Resource Storage</h3>
    <ul class="nav flex-column">
      <li class="nav-item">
        <a href="/toDo" class="nav-link text-white">To Do List</a>
      </li>
      <li class="nav-item">
        <a href="/calender" class="nav-link text-white">calender</a>
      </li>
      <li class="nav-item">
        <a href="#" class="nav-link text-white">Settings</a>
      </li>
      <li class="nav-item">
        <a href="/home.html" class="nav-link text-white">Back to home</a>
      </li>
      <button class="btn btn-primary d-md-none" data-bs-toggle="collapse" data-bs-target="#sidebar">
        Toggle Sidebar
      </button>
    
    </ul>
    
  </nav>
<!--   
      <div class="container">
        <h1>lesson Planner</h1>
<h2>Submit Your Data</h2>
<form id="myForm">
<div class="row">
    <div class="col-md-6">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br><br>
    </div>
    <div class="col-md-6">
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required><br><br>
    </div>
     <div class="col-md-10">
    <label for="lessonDetail" class="form-label">Lesson Details</label>
    <input type="lessonDetail" class="form-control" id="lessonDetail">
  </div>
  </div>
  <button type = "favourite">Favourite</button>
  <button type="submit">Submit</button>
</form>
<nav id="sidebar" class="collapse sidebar bg-dark text-white p-3 d-md-block"> -->
    ...
  <!-- </nav> -->
  <span id="username"></span>
   
</form>

<h2>Submitted Data</h2>
<div id="submissions" style="margin-top: 20px; font-family: Arial, sans-serif;"></div>

<p id="responseMessage" style="margin-top: 10px; color: green;"></p>
</div>

<body>
  <div id="lessonPlans">
    <h2>Your Lesson Plans</h2>
    <!-- Dynamic lesson plans will be inserted here -->
    <ul id="lessonList"></ul>
  </div>


<form id="lessonForm">
  <label for="lessonName">Lesson Name:</label>
  <input type="text" id="lessonName" required><br>

  <label for="lessonDate">Lesson Date:</label>
  <input type="date" id="lessonDate" required><br>

  <label for="lessonDetails">Lesson Details:</label>
  <textarea id="lessonDetails" required></textarea><br>

  <button type="submit">Add Lesson</button>
</form>


  <!-- Dynamic lesson plans will be inserted here -->
  
  <h4>Recent posts</h4>
    <ul id="getLessonData"></ul>

  <script>

  // Get username from the session or input (make sure to replace this with actual data)
  //const username = 'username'; //NOT WORKING

  document.getElementById('lessonForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const lessonName = document.getElementById('lessonName').value;
    const lessonDate = document.getElementById('lessonDate').value;
    const lessonDetails = document.getElementById('lessonDetails').value;

    // Send POST request to add the lesson plan
    fetch('/addLessonPlan', {
      method: 'POST',
      headers: {
            'Content-Type': 'application/json',
        },
      body: JSON.stringify({
        lessonName: lessonName,
        lessonDate: lessonDate,  // Send the date string directly
        lessonDetails: lessonDetails,
        // username: username       // Include the username
      })
    })
    .then(response => response.json())
    .then(data => {
      alert('Lesson added successfully');
    })
    .catch(error => console.error('Error adding lesson:', error));
  });

  const recentPlan=document.getElementById('getLessonData')


  
fetch('/data')
    .then(response=>response.json())
    .then(processData)

function processData(data){
    console.log(data)
    recentPlan.innerHTML=""
    data.posts.forEach(post=>{
        let li=document.createElement('li')
        li.innerText=`${post.lessonName} by user: ${post.lessonDate}`
        recentPlan.appendChild(li)
    })
}



//add the lesson plans
  // function displayLessonPlans() {
  //   fetch(`/addLessonPlan?username=${"test"}`, { method: 'GET' })
  //     .then(response => response.json())
  //     .then(data => {
  //       const lessonList = document.getElementById('lessonList');
  //       lessonList.innerHTML = ''; // Clear any existing lessons

  //       // Loop through the lesson plans and display them
  //       data.lessonName.forEach((lessonName, index) => {
  //         const listItem = document.createElement('li');
  //         listItem.innerHTML = `
  //           <strong>${lessonName}</strong> (Date: ${new Date(data.lessonDate[index]).toLocaleDateString()})
  //           <p>${data.lessonDetails[index]}</p>
  //         `;
  //         lessonList.appendChild(listItem);
  //       });
  //     })
  //     .catch(error => console.error('Error retrieving lesson plans:', error));
  // }

  // // Fetch and display existing lesson plans when the page loads
  // window.onload = displayLessonPlans;
</script>




<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>
